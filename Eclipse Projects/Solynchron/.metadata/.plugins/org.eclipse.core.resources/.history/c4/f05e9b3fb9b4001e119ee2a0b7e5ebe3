/**
 * 
 */
package com.startup.solynchron.forms;

import net.sf.rcpforms.form.RCPFormEditorPart;

import org.eclipse.core.runtime.IProgressMonitor;

import com.startup.solynchron.CodeExecutor;
import com.startup.solynchron.ExecutionManager;
import com.startup.solynchron.ICodeExecutor;
import com.startup.solynchron.obj.problem.Problem;

/**
 * @author plamKaTa
 *
 */
public class ProblemFormEditorPart extends RCPFormEditorPart<ProblemForm> {

	/**
	 * @param form
	 */
	public ProblemFormEditorPart(ProblemForm form) {
		super(form);
	}

	/* (non-Javadoc)
	 * @see org.eclipse.ui.part.EditorPart#doSave(org.eclipse.core.runtime.IProgressMonitor)
	 */
	@Override
	public void doSave(IProgressMonitor monitor) {
		FormEditorInput input = (FormEditorInput) getEditorInput();
		Object[] models = input.getModels();
		if (models.length > 0) {
			Problem problem = (Problem) models[0];
			ExecutionManager.executeInTransaction(new CodeExecutor(problem) {
				@Override
				public Object execute(Object[] params) throws Exception {
					// TODO Auto-generated method stub
					return null;
				}
			}, true, problem);
		}
		this.setDirty(false);
	}

	/* (non-Javadoc)
	 * @see org.eclipse.ui.part.EditorPart#doSaveAs()
	 */
	@Override
	public void doSaveAs() {

	}

	/* (non-Javadoc)
	 * @see org.eclipse.ui.part.EditorPart#isSaveAsAllowed()
	 */
	@Override
	public boolean isSaveAsAllowed() {
		return false;
	}

}
